{"ast":null,"code":"import _slicedToArray from\"/Users/leowong/Desktop/hk-transport-data/hk-transport-display/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{Card,CardContent,Chip}from\"@material-ui/core\";import Dict from\"./LRT_Dict.js\";import'../css/LRTInfo.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LrtInfo(_ref){var sid=_ref.sid,lang=_ref.lang;var _useState=useState(),_useState2=_slicedToArray(_useState,2),lrtETA=_useState2[0],setLRTEta=_useState2[1];var lrtApi=\"https://rt.data.gov.hk/v1/transport/mtr/lrt/getSchedule?station_id=\".concat(sid);var fLang=\"\";if(lang==\"tc\"){fLang=\"ch\";}else{fLang=lang;}useEffect(function(){setInterval(function(){axios.get(lrtApi).then(function(res){return setLRTEta(res.data);});},10000);},[]);useEffect(function(){axios.get(lrtApi).then(function(res){return setLRTEta(res.data);});},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"lrtinfo\",children:/*#__PURE__*/_jsx(Card,{className:\"infobox\",children:lrtETA===null||lrtETA===void 0?void 0:lrtETA.platform_list.map(function(plat){var _plat$route_list;return/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Chip,{variant:\"outlined\",color:\"primary\",label:Dict.lrtStation[lang][sid]+Dict.lrtCommon[lang].stn+\", \"+Dict.lrtETABox[lang].plat+\": \"+plat.platform_id}),(_plat$route_list=plat.route_list)===null||_plat$route_list===void 0?void 0:_plat$route_list.map(function(train){return/*#__PURE__*/_jsxs(\"div\",{className:\"etaBox\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lrt__route\",children:/*#__PURE__*/_jsx(Chip,{size:\"small\",label:train.route_no})}),/*#__PURE__*/_jsx(\"div\",{className:\"etaBox__row\",children:/*#__PURE__*/_jsx(\"small\",{children:train[\"dest_\"+fLang]})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:\"1 0 0\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"etaBox__row\",children:/*#__PURE__*/_jsx(\"small\",{children:train[\"time_\"+fLang]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lrtTrain__length\",children:Array(train.train_length).fill().map(function(_,i){return\"ðŸš‹\";})})]});})]});})})});}export default LrtInfo;","map":{"version":3,"sources":["/Users/leowong/Desktop/hk-transport-data/hk-transport-display/src/component/LrtInfo.js"],"names":["React","useEffect","useState","axios","Card","CardContent","Chip","Dict","LrtInfo","sid","lang","lrtETA","setLRTEta","lrtApi","fLang","setInterval","get","then","res","data","platform_list","map","plat","lrtStation","lrtCommon","stn","lrtETABox","platform_id","route_list","train","route_no","flex","Array","train_length","fill","_","i"],"mappings":"gJAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,WAAf,CAA4BC,IAA5B,KAAwC,mBAAxC,CACA,MAAOC,CAAAA,IAAP,KAAiB,eAAjB,CACA,MAAO,oBAAP,C,wFAEA,QAASC,CAAAA,OAAT,MAAgC,IAAbC,CAAAA,GAAa,MAAbA,GAAa,CAARC,IAAQ,MAARA,IAAQ,CAC9B,cAA4BR,QAAQ,EAApC,wCAAOS,MAAP,eAAeC,SAAf,eACA,GAAMC,CAAAA,MAAM,8EAAyEJ,GAAzE,CAAZ,CACA,GAAIK,CAAAA,KAAK,CAAG,EAAZ,CAEA,GAAIJ,IAAI,EAAI,IAAZ,CAAkB,CAChBI,KAAK,CAAG,IAAR,CACD,CAFD,IAEO,CACLA,KAAK,CAAGJ,IAAR,CACD,CAEDT,SAAS,CAAC,UAAM,CACdc,WAAW,CAAC,UAAM,CAChBZ,KAAK,CAACa,GAAN,CAAUH,MAAV,EAAkBI,IAAlB,CAAuB,SAACC,GAAD,QAASN,CAAAA,SAAS,CAACM,GAAG,CAACC,IAAL,CAAlB,EAAvB,EACD,CAFU,CAER,KAFQ,CAAX,CAGD,CAJQ,CAIN,EAJM,CAAT,CAMAlB,SAAS,CAAC,UAAM,CACdE,KAAK,CAACa,GAAN,CAAUH,MAAV,EAAkBI,IAAlB,CAAuB,SAACC,GAAD,QAASN,CAAAA,SAAS,CAACM,GAAG,CAACC,IAAL,CAAlB,EAAvB,EACD,CAFQ,CAEN,EAFM,CAAT,CAGA,mBACE,YAAK,SAAS,CAAC,SAAf,uBACE,KAAC,IAAD,EAAM,SAAS,CAAC,SAAhB,UACGR,MADH,SACGA,MADH,iBACGA,MAAM,CAAES,aAAR,CAAsBC,GAAtB,CAA0B,SAACC,IAAD,0CACzB,MAAC,WAAD,yBACE,KAAC,IAAD,EACE,OAAO,CAAC,UADV,CAEE,KAAK,CAAC,SAFR,CAGE,KAAK,CAEHf,IAAI,CAACgB,UAAL,CAAgBb,IAAhB,EAAsBD,GAAtB,EACAF,IAAI,CAACiB,SAAL,CAAed,IAAf,EAAqBe,GADrB,CAEA,IAFA,CAGAlB,IAAI,CAACmB,SAAL,CAAehB,IAAf,EAAqBY,IAHrB,CAIA,IAJA,CAMAA,IAAI,CAACK,WAXT,EADF,mBAeGL,IAAI,CAACM,UAfR,2CAeG,iBAAiBP,GAAjB,CAAqB,SAACQ,KAAD,qBACpB,aAAK,SAAS,CAAC,QAAf,wBACE,YAAK,SAAS,CAAC,YAAf,uBACE,KAAC,IAAD,EAAM,IAAI,CAAC,OAAX,CAAmB,KAAK,CAAEA,KAAK,CAACC,QAAhC,EADF,EADF,cAIE,YAAK,SAAS,CAAC,aAAf,uBACE,uBAAQD,KAAK,CAAC,QAAUf,KAAX,CAAb,EADF,EAJF,cAOE,YAAK,KAAK,CAAE,CAAEiB,IAAI,CAAE,OAAR,CAAZ,EAPF,cAQE,YAAK,SAAS,CAAC,aAAf,uBACE,uBAAQF,KAAK,CAAC,QAAUf,KAAX,CAAb,EADF,EARF,cAWE,YAAK,SAAS,CAAC,kBAAf,UACGkB,KAAK,CAACH,KAAK,CAACI,YAAP,CAAL,CACEC,IADF,GAEEb,GAFF,CAEM,SAACc,CAAD,CAAIC,CAAJ,QAAU,IAAV,EAFN,CADH,EAXF,GADoB,EAArB,CAfH,GADyB,EAA1B,CADH,EADF,EADF,CA2CD,CAED,cAAe5B,CAAAA,OAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Card, CardContent, Chip } from \"@material-ui/core\";\nimport Dict from \"./LRT_Dict.js\";\nimport '../css/LRTInfo.css';\n\nfunction LrtInfo({ sid, lang }) {\n  const [lrtETA, setLRTEta] = useState();\n  const lrtApi = `https://rt.data.gov.hk/v1/transport/mtr/lrt/getSchedule?station_id=${sid}`;\n  let fLang = \"\";\n\n  if (lang == \"tc\") {\n    fLang = \"ch\";\n  } else {\n    fLang = lang;\n  }\n\n  useEffect(() => {\n    setInterval(() => {\n      axios.get(lrtApi).then((res) => setLRTEta(res.data));\n    }, 10000);\n  }, []);\n\n  useEffect(() => {\n    axios.get(lrtApi).then((res) => setLRTEta(res.data));\n  }, []);\n  return (\n    <div className=\"lrtinfo\">\n      <Card className=\"infobox\">\n        {lrtETA?.platform_list.map((plat) => (\n          <CardContent>\n            <Chip\n              variant=\"outlined\"\n              color=\"primary\"\n              label={\n                \n                Dict.lrtStation[lang][sid] +\n                Dict.lrtCommon[lang].stn +\n                \", \" +\n                Dict.lrtETABox[lang].plat +\n                \": \" +\n                \n                plat.platform_id\n              }\n            />\n            {plat.route_list?.map((train) => (\n              <div className=\"etaBox\">\n                <div className=\"lrt__route\">\n                  <Chip size=\"small\" label={train.route_no} />\n                </div>\n                <div className=\"etaBox__row\">\n                  <small>{train[\"dest_\" + fLang]}</small>\n                </div>\n                <div style={{ flex: \"1 0 0\" }} />\n                <div className=\"etaBox__row\">\n                  <small>{train[\"time_\" + fLang]}</small>\n                </div>\n                <div className=\"lrtTrain__length\">\n                  {Array(train.train_length)\n                    .fill()\n                    .map((_, i) => \"ðŸš‹\")}\n                </div>\n              </div>\n            ))}\n          </CardContent>\n        ))}\n      </Card>\n    </div>\n  );\n}\n\nexport default LrtInfo;\n"]},"metadata":{},"sourceType":"module"}